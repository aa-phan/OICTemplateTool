<!DOCTYPE html>
<html>
<head>
    <title>OIC Template Tool</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $(document).ready(function() {
            function copyToClipboard(text) {
                if (navigator.clipboard && navigator.clipboard.writeText) { // Check for Clipboard API support
                    navigator.clipboard.writeText(text).then(function() {
                        console.log('Text successfully copied to clipboard');
                        //alert('Message copied to clipboard!'); // Provide feedback to the user
                    }).catch(function(err) {
                        console.error('Failed to copy text to clipboard', err);
                        //alert('Failed to copy message to clipboard.'); // Inform user of failure
                    });
                } else {
                    // Fallback for older browsers (less reliable, but better than nothing)
                    console.warn('Clipboard API not available, falling back to execCommand'); // Notify developers about the fallback
                    var tempTextArea = document.createElement("textarea"); // Create a temporary textarea element
                    tempTextArea.value = text;
                    document.body.appendChild(tempTextArea); // Append the textarea to the document body
                    tempTextArea.select(); // Select the text in the textarea
                    document.execCommand("copy"); // Execute the copy command
                    document.body.removeChild(tempTextArea); // Remove the temporary textarea
                    //alert('Message copied to clipboard (using fallback)!');
                }
            }

            $('#trigNIDsub').on('click',function() {
                var $form = $(this).closest('form');
                $.ajax({
                    url: '/trigger_NID',
                    type: 'POST',
                    data: $form.serialize(),
                    success: function(response) {
                        $('#messageArea').text(response.message);
                        copyToClipboard(response.message);
                        $form[0].reset();
                        
                    },
                    error: function(error) {
                        console.log(error);
                    }
                });
                return false;
            });
            $('#WIA_Button').on('click', function() {
                $.ajax({
                    url: '/trigger_wia_message',
                    type: 'POST',
                    success: function(response) {
                        $('#messageArea').text(response.message);
                        copyToClipboard(response.message);
                    },
                    error: function(error) {
                        console.log(error);
                    }
                });
            });
            $('#trigDRsub').on('click',function() {
                var $form = $(this).closest('form');
                $.ajax({
                    url: '/trigger_DR',
                    type: 'POST',
                    data: $form.serialize(),
                    success: function(response) {
                        $('#messageArea').text(response.message);
                        copyToClipboard(response.message);
                        $form[0].reset();
                        
                    },
                    error: function(error) {
                        console.log(error);
                    }
                });
                return false;
            });
            $('#trigDCsub').on('click',function() {
                var $form = $(this).closest('form');
                $.ajax({
                    url: '/trigger_DC',
                    type: 'POST',
                    data: $form.serialize(),
                    success: function(response) {
                        $('#messageArea').text(response.message);
                        copyToClipboard(response.message);
                        $form[0].reset();
                        
                    },
                    error: function(error) {
                        console.log(error);
                    }
                });
                return false;
            });
            $('#trigATTsub').on('click',function() {
                var $form = $(this).closest('form');
                $.ajax({
                    url: '/trigger_ATT',
                    type: 'POST',
                    data: $form.serialize(),
                    success: function(response) {
                        $('#messageArea').text(response.message);
                        copyToClipboard(response.message);
                        $form[0].reset();
                        
                    },
                    error: function(error) {
                        console.log(error);
                    }
                });
                return false;
            });
            $('#CPW_Button').on('click', function() {
                $.ajax({
                    url: '/trigger_CPW',
                    type: 'POST',
                    success: function(response) {
                        $('#messageArea').text(response.message);
                        copyToClipboard(response.message);
                    },
                    error: function(error) {
                        console.log(error);
                    }
                });
            });
            $('#PI_Button').on('click', function() {
                $.ajax({
                    url: '/trigger_PI',
                    type: 'POST',
                    success: function(response) {
                        $('#messageArea').text(response.message);
                        copyToClipboard(response.message);
                    },
                    error: function(error) {
                        console.log(error);
                    }
                });
            });
            $('#FI_Button').on('click', function() {
                $.ajax({
                    url: '/trigger_FI',
                    type: 'POST',
                    success: function(response) {
                        $('#messageArea').text(response.message);
                        copyToClipboard(response.message);
                    },
                    error: function(error) {
                        console.log(error);
                    }
                });
            });
            $('#SS_Button').on('click', function() {
                $.ajax({
                    url: '/trigger_SS',
                    type: 'POST',
                    success: function(response) {
                        $('#messageArea').text(response.message);
                        copyToClipboard(response.message);
                    },
                    error: function(error) {
                        console.log(error);
                    }
                });
            });
            $('#SQ_Button').on('click', function() {
                $.ajax({
                    url: '/trigger_SQ',
                    type: 'POST',
                    success: function(response) {
                        $('#messageArea').text(response.message);
                        copyToClipboard(response.message);
                    },
                    error: function(error) {
                        console.log(error);
                    }
                });
            });
        });
    </script>
</head>
<body>
    <style>
        h1{
            font-family: "Tahoma", sans-serif;
            font-size: 40px;
        }
    </style>
    <h1>OIC Notes Template App</h1>
    <h2> made by: the best intern (aaron) </h2>
    <h3> can i have part-time job now :3 </h3>
    <button onclick="shutdownServer()">Shutdown Server</button>

    <script>
        function shutdownServer() {
            fetch('/shutdown', { method: 'GET' })
                .then(response => response.json())
                .then(data => {
                    console.log(data.message);
                    // You might want to close the browser window or redirect after a short delay
                    window.close(); // Or redirect to a "Server down" page
                })
                .catch(error => console.error('Error:', error));
                window.close()
        }
    </script>
    <br>
    <img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExZHhmZ2tidDc1bWg5cjhnczJianQxdmN3cmthMmMzNGVneWxyaGR3YiZlcD12MV9naWZzX3NlYXJjaCZjdD1n/jUwpNzg9IcyrK/giphy.gif" alt="reeee spectrum hates go getters" class="hardcoded-gif" width="400" height = "250">
    <br>
    <p id="messageArea"></p>
    <form action="/trigger_NID" method="POST">
        <input type = "text" name="location" placeholder="Demarc Location:"></input>
        <br>
        <button id = "trigNIDsub">NID Install Complete</button>
    </form>
    <br>
    <button id="WIA_Button">WIA Install Complete</button>
    <br>
    <br>
    <form action="/trigger_DR" method="POST">
        <input type = "text" name="date" placeholder="Enter Dispatch Date:"></input>
        <br>
        <button id = "trigDRsub">Dispatch Request</button>
    </form>
    <br>
    <form action="/trigger_DC" method="POST">
        <input type = "text" name="date" placeholder="Enter Dispatch Date:"></input>
        <input type = "text" name="name" placeholder="Enter Tech Name:"></input>
        <br>
        <button id = "trigDCsub">Dispatch Confirm</button>
    </form>
    <br>
    <form action="/ATT_Install" method="POST">
        <input type = "text" name="ip" placeholder="Enter IP Address:"></input>
        <br>
        <button id = "trigATTsub">AT&#38T Install</button>
    </form>
    <br>
    <button id="CPW_Button">CPW Complete</button>
    <br>
    <button id="PI_Button">Pre-Install Complete</button>
    <br>
    <button id="FI_Button">Final Install Complete</button>
    <br>
    <button id="SS_Button">Site Survey Complete</button>
    <br>
    <button id="SQ_Button">Surver Quote Complete</button>
    <br>
    </body>
</html>
